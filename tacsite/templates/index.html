{% extends 'base.html' %}
{% import "macros.html" as macros %}

{% block navigation %}
<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
    <ul class="nav navbar-nav navbar-right">
        <li class="hidden">
            <a href="#page-top"></a>
        </li>
        <li class="page-scroll">
            <a href="#information">Informationen</a>
        </li>
        <li class="page-scroll">
            <a href="#anmeldung">Anmeldung</a>
        </li>
        <li>
            <a href="#teams">Teams</a>
        </li>
        <li class="page-scroll">
            <a href="#contact">Kontakt</a>
        </li>
    </ul>
</div>
{% endblock %}

{% block header_content %}
<div class="container">
    <div class="row">
        <div class="col-lg-12">
            <img class="img-responsive" src="{{ url_for('static', filename='img/wallpaper2.png') }}" alt="">
            <div class="intro-text">
                <span class="name">6. Berliner TAC-Meisterschaft</span>
                <hr class="star-light">
                <span class="skills">29. August - 24 Teams - Rudi Berlin</span>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block sections %}
<!-- Portfolio Grid Section -->
<section id="information">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <h2>Informationen</h2>
                <hr class="star-primary">
            </div>
        </div>
        <div class="row">
            <div class="row-same-height row-full-height">
                <div class="col-sm-6 portfolio-item col-sm-height col-full-height">
                    <div class='info-header red-text'>
                        <i class="fa fa-calendar fa-2x"></i>
                        <span>Termin</span>
                    </div>
                    <div class='info-content'>Das Turnier wird am 29. August 2015 stattfinden.
                    <br>
                    Beginn der Veranstaltung ist 9 Uhr, geplantes Ende wird etwa gegen 20 Uhr sein.</div>
                </div>

                <div class="col-sm-6 portfolio-item col-sm-height col-full-height">
                    <div class='info-header red-text'>
                        <i class="fa fa-map-marker fa-2x"></i>
                        <span>Veranstaltungsort</span>
                    </div>
                    <div class='info-content'>RuDi Kultur- und Nachbarschaftszentrum
                        <br>
                        Modersohnstra&szlig;e 55, 10245 Berlin (Friedrichshain)
                        <br><a id='tomap' href="#map">(siehe Karte)</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="row row-pad">
        </div>

        <div class="row">
            <div class="row-same-height row-full-height">

                <div class="col-sm-6 portfolio-item col-sm-height col-full-height">
                    <div class='info-header green-text'>
                        <i class="fa fa-eur fa-2x"></i>
                        <span>Kosten</span>
                    </div>
                    <div class='info-content'>Die Teilnahmegeb&uuml;hr beträgt 25&euro;
                    pro Team. Nach Anmeldung muss die Geb&uuml;hr per &Uuml;berweisung bezahlt werden.</div>

                </div>

                <div class="col-sm-6 portfolio-item col-sm-height col-full-height">
                    <div class='info-header green-text'>
                        <i class="fa fa-trophy fa-2x"></i>
                        <span>Gewinne</span>
                    </div>
                    <div class='info-content'>Ruhm, Ehre, Qualifikationspl&auml;tze f&uuml;r die WM 2017 sowie ein Wanderpokal und weitere Sachpreise.</div>
                </div>
            </div>
        </div>

        <div class="row row-pad">
        </div>

        <div class="row">
            <div class="row-same-height row-full-height">
                <div class="col-sm-6 portfolio-item col-sm-height col-full-height">
                    <div class='info-header blue-text'>
                        <i class="fa fa-sitemap fa-2x"></i>
                        <span>Spielvariante</span>
                    </div>
                    <div class='info-content'>Bei dem Turnier wird die Meisterversion nach offiziellen Regeln gespielt. Der Turnierverlauf sieht eine Gruppenphase mit anschließender K.O.-Runde vor.
                    <br>Die Gruppenphase wird nach dem Schweizer System gespielt, so dass möglichst gleichstarke Teams gegeneinander antreten.
                    </div>


                </div>
                <div class="col-sm-6 portfolio-item col-sm-height col-full-height">
                    <div class='info-header blue-text'>
                        <i class="fa fa-cutlery fa-2x"></i>
                        <span>Verpflegung</span>
                    </div>
                    <div class='info-content'>Getr&auml;nke und Speisen werden durch das Team des RuDi bereitgestellt und m&uuml;ssen extra bezahlt werden.
                    <br>Au&szlig;erdem besteht die M&ouml;glichkeit Caf&eacute;s, Bars und Imbisse in der Umgebung aufzusuchen.</div>

                </div>
            </div>
        </div>

        <div class="row row-pad">
        </div>

        <div class="row">
            <div class="row-same-height row-full-height">
                <div class="col-sm-6 portfolio-item col-sm-height col-full-height">
                    <div class='info-header white-text'>
                        <i class="fa fa-users fa-2x"></i>
                        <span>Startpl&auml;tze</span>
                    </div>
                    <div class='info-content'>Die Teilnehmerzahl ist auf 24 Teams beschr&auml;nkt.</div>

                </div>
                <div class="col-sm-6 portfolio-item col-sm-height col-full-height">
                    <div class='info-header white-text'>
                        <i class="fa fa-clock-o fa-2x"></i>
                        <span>Anmeldeschluss</span>
                    </div>
                    <div class='info-content'>Die Anmeldung zum Turnier ist bis zum 25.08. m&ouml;glich</div>

                </div>
            </div>
        </div>

        <div class="row row-pad">
        </div>

        <div class="row">
            <div id="map" class="col-sm-12"></div>
        </div>
    </div>
</section>

<!-- About Section -->
<section class="success" id="anmeldung">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <h2>Anmeldung</h2>
                <hr class="star-light">
            </div>
        </div>
        <div class="row">
            <div class="teamcount col-sm-12 text-center">
                <b>Es sind noch {{free_places}} Pl&auml;tze frei.</b>
            </div>
        </div>
        <div class="row">
            <div class="teamcount col-sm-12 text-center">
                Nach der Anmeldung &uuml;ber das Formular ist der Startplatz zun&auml;chst f&uuml;r 10 Tage reserviert.
                Die Anmeldung ist erst mit der &Uuml;berweisung der Teilnahmegeb&uuml;hr abgeschlossen.
                Informationen zur &Uuml;berweisung werden nach dem Abschicken des Formulares per Email mitgeteilt.
            </div>
        </div>
        <div class="row">
            <form id="team-registration" class="form-horizontal" role="form" method="POST" action="/">
                {{ reg_form.csrf_token }}
                {{ macros.input_offset(reg_form.team, placeholder='Team Tac') }}
                {{ macros.input_multiple([reg_form.person_one, reg_form.person_two], placeholder='Vorname Nachname') }}
                {{ macros.input_multiple([reg_form.email_one, reg_form.email_two], placeholder='Email Adresse') }}
                {{ macros.button(reg_form.submit, enabled=allow_new) }}
            </form>
        </div>

        <div class="row">
            <div id="registration-success" class="col-sm-12 text-center hidden">
                <hr class="star-light">
                <b>Die Anmeldung war erfolgreich - weitere Informationen sind per Email unterwegs.</b>
            </div>
        </div>
    </div>
</section>

<section id="teams">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <h2>Teams</h2>
                <hr class="star-primary">
            </div>
        </div>
        <div class="row">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Teamname</th>
                        <th>Spieler 1</th>
                        <th>Spieler 2</th>
                    </tr>
                </thead>
                <tbody>
                {% for index, team in enumerate(teams) %}
                    <tr>
                        <td>{{index + 1}}</td>
                        <td>{{team.name}}</td>
                        {% for person in team.persons %}
                        <td>{{person.first_name}}</td>
                        {% endfor %}
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</section>

<!-- Contact Section -->
<section id="contact" class="success">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <h2>Kontakt</h2>
                <hr class="star-light">
            </div>
        </div>

        <div class="row">
            <div class="col-lg-8 col-lg-offset-2">
                <form name="sentMessage" id="contactForm" action='/' method='POST'>
                    <div class="row">
                        <div class="col-md-6">
                            {{ contact_form.csrf_token }}
                            {{ macros.input_labelfree(contact_form.name, class='form-control', placeholder='Dein Name *')}}
                            {{ macros.input_labelfree(contact_form.email, class='form-control', placeholder='Email-Adresse *')}}
                            {{ macros.input_labelfree(contact_form.phone, class='form-control', placeholder='Telefonnummer (optional)')}}
                        </div>
                        <div class="col-md-6">
                            {{ macros.input_labelfree(contact_form.message, class='form-control', placeholder='Deine Nachricht an uns...')}}
                        </div>
                        <div class="clearfix"></div>
                        {{ macros.button(contact_form.submit) }}
                    </div>
                </form>
            </div>
        </div>
        <div class="row">
            <div id="contact-success" class="col-sm-12 text-center hidden">
                <hr class="star-light">
                <b>Die Nachricht wurde erfolgreich gesendet!</b>
            </div>
            <div id="messageErrors">
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block footer_content %}
<div class="footer-above">
    <div class="container">
        <div class="row">
            <div class="footer-col col-md-4">
                <h3>Weitere Links</h3>
                <div class="btn-group-vertical" role="group" aria-label="...">
                  <a href="http://spiel-tac.de" class="btn btn-success">Spiel Tac Website</a>

                  <a href="http://rudizentrum.de" class="btn btn-success">RuDi Kultur- und Nachbarschaftszentrum</a>
                </div>


            </div>

            <div class="footer-col col-md-offset-1 col-md-2">
                <h3>Impressum</h3>
                <a href="{{url_for('frontend.impressum')}}" class="btn btn-success">Impressum</a>
            </div>
            <div class="footer-col col-md-offset-1 col-md-4 ">
                <h3>Organisatoren</h3>
                <p>Marcel Radischat
                <br>Alexander Flesch
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block custom_javascript %}
<script type='text/javascript'>
    $(document).ready(function(){

        var map = L.map('map').setView([52.502, 13.459], 15);
        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
            attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>',
            maxZoom: 18,
            id: 'quiqua.m5708fgk',
            accessToken: 'pk.eyJ1IjoicXVpcXVhIiwiYSI6Ik0ySHI4X3cifQ.VugiUOPOVSD2_E_mgN-2Jw',
            detectRetina: false,
            tileSize: 256
        }).addTo(map);

        var myIcon = L.icon({
            iconUrl: "{{ url_for('static', filename='img/marker-icon.png') }}",
            iconRetinaUrl: "{{ url_for('static', filename='img/marker-icon-2x.png') }}",
            shadowUrl: "{{ url_for('static', filename='img/marker-shadow.png') }}",
            iconSize: [25, 41],
            iconAnchor: [13, 41],
            popupAnchor: [0, -30],
            shadowSize: [68, 95],
            shadowAnchor: [22, 94]
        });

        var marker = L.marker([52.502397, 13.457189], {icon: myIcon}).addTo(map);

        marker.bindPopup("<b>RuDi Kultuzentrum</b><br>Modersohnstra&szlig;e 55").openPopup();
    })
</script>


{% if scroll_to %}
<script type='text/javascript'>
    $(document).ready(function(){
        var scroll_to = '{{scroll_to}}';

        if (scroll_to == 'reg_success'){
            $('#registration-success').removeClass('hidden');
            $('html, body').stop().animate({
                scrollTop: $('#registration-success').offset().top - 200
            }, 0, 'easeInOutExpo');
        }

        else if (scroll_to == 'reg_error'){
            $('html, body').stop().animate({
                scrollTop: $('#anmeldung').offset().top
            }, 0, 'easeInOutExpo');
        }

        else if (scroll_to == 'contact_success'){
            $('#contact-success').removeClass('hidden');
            $('html, body').stop().animate({
                scrollTop: $('#contact').offset().top
            }, 0, 'easeInOutExpo');
        }
        else if (scroll_to == 'contact_error'){
            $('html, body').stop().animate({
                scrollTop: $('#contact').offset().top
            }, 0, 'easeInOutExpo');
        }
    });
</script>
{% endif %}

{% endblock %}